var app=angular.module("Chat",["ngStorage"]);app.controller("ChatController",["$scope","$localStorage","$filter","$location","$http","$anchorScroll","$timeout",function(t,e,a,n,i,o,s){t.message=[],t.isChatOpenFlag=!1;var l=n.absUrl();console.log(l),t.sendData={},t.Text,t.regions=["ACT","NSW","NT","QLD","SA","TAS","VIC","WA"],t.showButtons=!1,t.TextSent="",t.OpenFeedback=!1,t.rating,t.ratingText=["Hated it","Disliked it","It's OK","Liked it","Loved it"];var r=!1;t.quickreplyflag=!1,t.UrlButtonFlag=!1,t.quickreply=[],t.UrlButton=[];var d,u;!0&&(window.innerWidth,d=window.innerHeight),window.onresize=function(){if(u=window.innerHeight,window.orientation="landscape"){if(u/d>=.5)return void((e=document.getElementById("chat-history")).style.display="visible");var e=document.getElementById("chat-history");return t.showChatHistry=!1,void(e.style.display="none")}return void((e=document.getElementById("chat-history")).style.display="visible")},r||(r=!0,i.post(l+"watson?m="+!0+"&y=&z=Sandip&t="+new Date).then(function(e,a){console.log("success",JSON.stringify(e.data)),t.message.push(e.data);n.hash(t.message.length-1),o(),s(function(){n.hash("")},100)})),t.storeRating=function(e){t.OpenFeedback=!0,t.rating=e+1},t.UnlockChat=function(){t.isChatOpenFlag=!0},t.LockChat=function(){t.isChatOpenFlag=!1},t.Feedback=function(e){t.quickreplyflag=!1;var a=e;t.sendMessage(a)},t.sendMessage=function(e){if(t.Text=e,null!=t.Text||void 0!=t.Text){var a={},r=new Date;Timestamp=r.toString();t.sendData={Type:"Sent",Author:"Sandip",Text:t.Text,Time:Timestamp},a.Type=t.sendData.Type,a.Text=t.sendData.Text,a.Author=t.sendData.Author,a.Time=r,t.message.push(a);n.hash(t.message.length-1),o(),s(function(){n.hash("")},100),t.Text="",i.post(l+"watson?m="+!1+"&y="+a.Text+"&z="+a.Author+"&t="+a.Time).then(function(e,a){t.quickreplyflag=!1,t.UrlButtonFlag=!1,null!=e.data.quickreply||void 0!=e.data.quickreply?(t.quickreply=e.data.quickreply,t.quickreplyflag=!0):null==e.data.URL&&void 0==e.data.URL||(t.UrlButton=e.data.URL,t.Urltitle=e.data.title,t.UrlButtonFlag=!0),console.log("success",JSON.stringify(e.data)),t.message.push(e.data);n.hash(t.message.length-1),o(),s(function(){n.hash("")},100)})}}}]);