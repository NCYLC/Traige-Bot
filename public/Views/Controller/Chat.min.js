var app=angular.module("Chat",["ngStorage"]);app.controller("ChatController",["$scope","$localStorage","$filter","$location","$http","$anchorScroll","$timeout",function(e,t,a,n,i,o,l){e.message=[],e.isChatOpenFlag=!1;var s=n.absUrl();console.log(s),e.sendData={},e.Text,e.regions=["ACT","NSW","NT","QLD","SA","TAS","VIC","WA"],e.showButtons=!1,e.TextSent="",e.OpenFeedback=!1,e.rating,e.ratingText=["Hated it","Disliked it","It's OK","Liked it","Loved it"];var r=!1;e.quickreplyflag=!1,e.UrlButtonFlag=!1,e.quickreply=[],e.UrlButton=[];var d,c;!0&&(window.innerWidth,d=window.innerHeight),window.onresize=function(){if(c=window.innerHeight,window.orientation="landscape"){if(c/d>=.5){e=document.getElementById("chat-history");return(t=document.getElementById("Header")).style.display="block",void(e.style.display="block")}var e=document.getElementById("chat-history");return(t=document.getElementById("Header")).style.display="none",void(e.style.display="none")}(e=document.getElementById("chat-history")).style.display="block";var t=document.getElementById("Header");return void(t.style.display="block")},r||(r=!0,i.post(s+"watson?m="+!0+"&y=&z=Sandip&t="+new Date).then(function(t,a){console.log("success",JSON.stringify(t.data)),e.message.push(t.data);n.hash(e.message.length-1),o(),l(function(){n.hash("")},100)})),e.storeRating=function(t){e.OpenFeedback=!0,e.rating=t+1},e.UnlockChat=function(){e.isChatOpenFlag=!0},e.LockChat=function(){e.isChatOpenFlag=!1},e.Feedback=function(t){e.quickreplyflag=!1;var a=t;e.sendMessage(a)},e.sendMessage=function(t){if(e.Text=t,null!=e.Text||void 0!=e.Text){var a={},r=new Date;Timestamp=r.toString();e.sendData={Type:"Sent",Author:"Sandip",Text:e.Text,Time:Timestamp},a.Type=e.sendData.Type,a.Text=e.sendData.Text,a.Author=e.sendData.Author,a.Time=r,e.message.push(a);n.hash(e.message.length-1),o(),l(function(){n.hash("")},100),e.Text="",i.post(s+"watson?m="+!1+"&y="+a.Text+"&z="+a.Author+"&t="+a.Time).then(function(t,a){e.quickreplyflag=!1,e.UrlButtonFlag=!1,null!=t.data.quickreply||void 0!=t.data.quickreply?(e.quickreply=t.data.quickreply,e.quickreplyflag=!0):null==t.data.URL&&void 0==t.data.URL||(e.UrlButton=t.data.URL,e.Urltitle=t.data.title,e.UrlButtonFlag=!0),console.log("success",JSON.stringify(t.data)),e.message.push(t.data);n.hash(e.message.length-1),o(),l(function(){n.hash("")},100)})}}}]);